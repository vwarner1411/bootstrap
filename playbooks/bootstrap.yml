- name: Bootstrap workstation
  hosts: localhost
  gather_facts: true
  become: true
  environment:
    PATH: "/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/bin:/sbin"
  vars:
    profile: "{{ profile | default('desktop') }}"
    linux_cli_skip_tools: "{{ ['powershell', 'kitty', 'yt-dlp'] if (profile | default('desktop')) == 'server' else [] }}"
  roles:
    - role: common_core
    - role: linux_cli
      when: ansible_facts.os_family == "Debian"
    - role: macos_cli
      when: ansible_facts.system == "Darwin"
    - role: shell_extras
    - role: desktop_tools
      when: profile == "desktop"
